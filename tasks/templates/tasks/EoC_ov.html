{% extends "global/Page.html" %}
{% load otree static %}

{% block head_title %}
  Main Part
{% endblock %}

{% block title %}
Task {{ roundnumber }}: Investment decision
{% endblock %}


{% block content %}

<br>

<div class="alert alert-secondary" role="alert">
    <p align="justify">In the following task you have to make an investment decision. Please click on the sections I, II and III and read the instructions carefully. To ensure that you have understood the instructions, you will receive two comprehension questions.  While working on the task, you have the opportunity to review the instructions. To do so, click on the button provided at the end of the corresponding page. <br> <br> <strong>Please assume the following situation and try to put yourself in the described role.</strong></p>
  </div>

  <br>

<div class="accordion" id="EoC">
    <div class="card">
      <div class="card-header" id="headingOne">
        <h2 class="mb-0">
          <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" style="color:black" >
            <strong>I. General information about the role</strong>
          </button>
        </h2>
      </div>
  
      <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#EoC" >
        <div class="card-body">
            You have been working as a project manager in a company for several years. Your area of responsibility includes initiating lucrative projects as well as monitoring them and deciding on their further progress. The performance of these projects is always uncertain. Due to this uncertainty, decisions must be supported by several colleagues. You are very ambitious and always looking for outstanding projects.
        </div>
      </div>
    </div>
    <br>
    <div class="card">
      <div class="card-header" id="headingTwo">
        <h2 class="mb-0">
          <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" onclick="ProjectClick()" style="color:black" >
            <strong>II. General information about the project</strong>
          </button>
        </h2>
      </div>
      <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#EoC" >
        <div class="card-body">
            Four years ago, against the initial resistance of your colleagues, you were only able to implement such a project with great difficulty. You were convinced of the project idea from the start and saw first-class profit opportunities. The investment was worth $1 million and you estimated the annual returns at $270,000. Since the beginning you have put a lot of effort into the project and worked some overtime. Your expectations have been exceeded and the project has generated $330,000 annually for the first four years. The project is designed to have a life span of 7 years with 3 years remaining. 
        </div>
      </div>
    </div>
<br>
    <div class="card">
      <div class="card-header" id="headingThree">
        <h2 class="mb-0">
          <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree" onclick="SituationClick()" style="color:black" >
            <strong>III. Current situation</strong>
          </button>
        </h2>
      </div>
      <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#EoC" >
        <div class="card-body" align="justify">
             However, doubts about the future performance of the project are now emerging. The annual cash flows are expected to decline to $50,000. If this is the case, the net present value is $144,327.  On the contrary if the project is abandoned now, you will get $177,500 (salvage value). Especially because of your constant willingness to go the extra mile, you have a high reputation as a project manager. When it comes to project decisions, your colleagues appreciate your consulting skills. In the following meeting next week it should be decided whether the project, which  has  been  initiated  based  on  your  recommendation, should be continued or abandoned. 
        </div>
      </div>
    </div>
  </div>


<br>



<div style="text-align:center">
  <button id="showinfo" type="button" class="btn btn-primary" data-toggle="tooltip" title="Please click on section I, II & III and read all the given information">Show comprehension questions</button>
  </div>

    <div id="questions" style="display:none;">
        <style>
        .input-group, input.form-control, select.form-control, textarea.form-control {
            max-width: 150px;
        }
        </style>
    {% for field in form %}
    {% if field.html_name != "time_EoC_ov" %}
    <div class="card bg-light m-3">
        <div class="card-body">
    
                <b>{{ field.label }}</b>
                <hr>
                {{ field }}
            </div>
    </div>
    {% endif %}
    {% endfor %}
    </div>
    
        
        <div id="nextbtn" onclick="appendtimer()" style="text-align:right; display:none">
            {% next_button %}
        </div>
    

<input type="hidden" name="time_EoC_ov" id="time_EoC_ov" value=0>

<script>
$("#showinfo").on("click", function(e) {
    if (overviewRead == 1 && unternehmenRead == 1) { //comp questions button only clickable if section 2 and 3 have been opened
      e.preventDefault(); // in some browsers a button submits if no type=
      $("#questions").show(); // show questions div
      $("#nextbtn").show(); // show next button
      $("#showinfo").hide(); // hide info box on top
    }
});

$(document).ready(function(){
  $('[data-toggle="tooltip"]').tooltip();   
});

let overviewRead, unternehmenRead = 0 // will be set to one if respective tab has been opened

function ProjectClick() {
  overviewRead = 1; //check if section 2 was opened
}

function SituationClick() {
  unternehmenRead = 1; //check if section 3 was opened
}

var sec = 0; // global variable

// increasing timer
function pad ( val ) { return val > 9 ? val : "0" + val; }
setInterval( function(){
    $("#time_EoC_ov").val(sec); // store seconds spent on page in hidden field
    if (overviewRead == 1 && unternehmenRead == 1) { 
        $('#showinfo').removeAttr("type"); // removes type attribute from next button so form can be submitted
        $('#showinfo').removeAttr('data-original-title'); // removes tooltip
    }
}, 1000);

</script>

{% endblock %}